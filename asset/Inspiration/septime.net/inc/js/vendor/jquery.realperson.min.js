!function(e){function a(){this._defaults={length:6,includeNumbers:!1,regenerate:"",hashName:"{n}Hash"}}function t(a,t){return"option"==a&&(0==t.length||1==t.length&&"string"==typeof t[0])?!0:e.inArray(a,n)>-1}var r="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",s=[["   *   ","  * *  ","  * *  "," *   * "," ***** ","*     *","*     *"],["****** ","*     *","*     *","****** ","*     *","*     *","****** "],[" ***** ","*     *","*      ","*      ","*      ","*     *"," ***** "],["****** ","*     *","*     *","*     *","*     *","*     *","****** "],["*******","*      ","*      ","****   ","*      ","*      ","*******"],["*******","*      ","*      ","****   ","*      ","*      ","*      "],[" ***** ","*     *","*      ","*      ","*   ***","*     *"," ***** "],["*     *","*     *","*     *","*******","*     *","*     *","*     *"],["*******","   *   ","   *   ","   *   ","   *   ","   *   ","*******"],["      *","      *","      *","      *","      *","*     *"," ***** "],["*     *","*   ** ","* **   ","**     ","* **   ","*   ** ","*     *"],["*      ","*      ","*      ","*      ","*      ","*      ","*******"],["*     *","**   **","* * * *","*  *  *","*     *","*     *","*     *"],["*     *","**    *","* *   *","*  *  *","*   * *","*    **","*     *"],[" ***** ","*     *","*     *","*     *","*     *","*     *"," ***** "],["****** ","*     *","*     *","****** ","*      ","*      ","*      "],[" ***** ","*     *","*     *","*     *","*   * *","*    * "," **** *"],["****** ","*     *","*     *","****** ","*   *  ","*    * ","*     *"],[" ***** ","*     *","*      "," ***** ","      *","*     *"," ***** "],["*******","   *   ","   *   ","   *   ","   *   ","   *   ","   *   "],["*     *","*     *","*     *","*     *","*     *","*     *"," ***** "],["*     *","*     *"," *   * "," *   * ","  * *  ","  * *  ","   *   "],["*     *","*     *","*     *","*  *  *","* * * *","**   **","*     *"],["*     *"," *   * ","  * *  ","   *   ","  * *  "," *   * ","*     *"],["*     *"," *   * ","  * *  ","   *   ","   *   ","   *   ","   *   "],["*******","     * ","    *  ","   *   ","  *    "," *     ","*******"],["  ***  "," *   * ","*   * *","*  *  *","* *   *"," *   * ","  ***  "],["   *   ","  **   "," * *   ","   *   ","   *   ","   *   ","*******"],[" ***** ","*     *","      *","     * ","   **  "," **    ","*******"],[" ***** ","*     *","      *","    ** ","      *","*     *"," ***** "],["    *  ","   **  ","  * *  "," *  *  ","*******","    *  ","    *  "],["*******","*      ","****** ","      *","      *","*     *"," ***** "],["  **** "," *     ","*      ","****** ","*     *","*     *"," ***** "],["*******","     * ","    *  ","   *   ","  *    "," *     ","*      "],[" ***** ","*     *","*     *"," ***** ","*     *","*     *"," ***** "],[" ***** ","*     *","*     *"," ******","      *","     * "," ****  "]]
e.extend(a.prototype,{markerClassName:"hasRealPerson",propertyName:"realperson",setDefaults:function(a){return e.extend(this._defaults,a||{}),this},_attachPlugin:function(a,t){if(a=e(a),!a.hasClass(this.markerClassName)){var r={options:e.extend({},this._defaults)}
a.addClass(this.markerClassName).data(this.propertyName,r),this._optionPlugin(a,t)}},_optionPlugin:function(a,t,r){a=e(a)
var s=a.data(this.propertyName)
if(!t||"string"==typeof t&&null==r){var n=t
return t=(s||{}).options,t&&n?t[n]:t}if(a.hasClass(this.markerClassName)){if(t=t||{},"string"==typeof t){var n=t
t={},t[n]=r}e.extend(s.options,t),a.prevAll("."+this.propertyName+"-challenge,."+this.propertyName+"-hash").remove().end().before(this._generateHTML(a,s))}},_generateHTML:function(e,a){for(var t="",n=0;n<a.options.length;n++)t+=r.charAt(Math.floor(Math.random()*(a.options.includeNumbers?36:26)))
for(var i='<div class="'+this.propertyName+'-challenge">'+'<div class="'+this.propertyName+'-text">',n=0;n<s[0].length;n++){for(var l=0;l<t.length;l++)i+=s[r.indexOf(t.charAt(l))][n].replace(/ /g,"&nbsp;")+"&nbsp;&nbsp;"
i+="<br>"}return i+='</div><div class="'+this.propertyName+'-regen">'+a.options.regenerate+'</div></div><input type="hidden" class="'+this.propertyName+'-hash" name="'+a.options.hashName.replace(/\{n\}/,e.attr("name"))+'" value="'+this._hash(t)+'">'},_enablePlugin:function(a){a=e(a),a.hasClass(this.markerClassName)&&a.removeClass(this.propertyName+"-disabled").prop("disabled",!1).prevAll("."+this.propertyName+"-challenge").removeClass(this.propertyName+"-disabled")},_disablePlugin:function(a){a=e(a),a.hasClass(this.markerClassName)&&a.addClass(this.propertyName+"-disabled").prop("disabled",!0).prevAll("."+this.propertyName+"-challenge").addClass(this.propertyName+"-disabled")},_destroyPlugin:function(a){a=e(a),a.hasClass(this.markerClassName)&&a.removeClass(this.markerClassName).removeData(this.propertyName).prevAll("."+this.propertyName+"-challenge,."+this.propertyName+"-hash").remove()},_hash:function(e){for(var a=5381,t=0;t<e.length;t++)a=(a<<5)+a+e.charCodeAt(t)
return a}})
var n=[""]
e.fn.realperson=function(e){var a=Array.prototype.slice.call(arguments,1)
return t(e,a)?i["_"+e+"Plugin"].apply(i,[this[0]].concat(a)):this.each(function(){if("string"==typeof e){if(!i["_"+e+"Plugin"])throw"Unknown command: "+e
i["_"+e+"Plugin"].apply(i,[this].concat(a))}else i._attachPlugin(this,e||{})})}
var i=e.realperson=new a
e(document).on("click","div."+i.propertyName+"-challenge",function(){e(this).hasClass(i.propertyName+"-disabled")||e(this).nextAll("."+i.markerClassName).realperson("option",{})})}(jQuery)
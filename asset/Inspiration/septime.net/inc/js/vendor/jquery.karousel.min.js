$.fn.karOusel=function(e){var t,n,r,o,s,a=$(this),l={initVariables:function(){s=a.data("karOusel.settings"),t="string"==typeof s.navPrevious?$(s.navPrevious):s.navPrevious,n="string"==typeof s.navNext?$(s.navNext):s.navNext,r=s.itemWidth||a.children().first().width(),o=s.vertical?"top":"left"},init:function(e){s=$.extend({step:1,navPrevious:"#item-book-left",navNext:"#item-book-right",vertical:!1,duration:500,easing:!1,itemWidth:0,swipe:!0},e),s.swipe=s.swipe&&$.fn.swipe,a.data("karOusel.settings",s),l.initVariables()
var t=a.children().length
a.css(s.vertical?"height":"width",r*(t+2*s.step)+"px"),l.leftClones(),a.css(o,-r*s.step),s.swipe&&a.swipe({swipeLeft:function(){l.onArrowClicked({data:{leftArrow:!1}})},swipeRight:function(){l.onArrowClicked({data:{leftArrow:!0}})}}),l.addEvents()},reposition:function(e){var t={},i={duration:s.duration,queue:!1}
void 0!==e&&(r=e,s.itemWidth=r,a.data("karOusel.settings",s)),s.easing&&(i.easing=s.easing),t[o]=-r*s.step+"px",a.stop().animate(t,i)},addEvents:function(){t.off("click").on("click",{leftArrow:!0},l.onArrowClicked),n.off("click").on("click",{leftArrow:!1},l.onArrowClicked),s.swipe&&a.swipe("enable")},removeEvents:function(){t.off("click"),n.off("click"),s.swipe&&a.swipe("disable")},onArrowClicked:function(e){a.trigger("karOusel.beforeMove"),l.removeEvents()
var t=e.data.leftArrow,i={},n={duration:s.duration,queue:!1,complete:l.curry(l.onMoveFinish,null,t)}
s.easing&&(n.easing=s.easing),i[o]=t?0:2*-r*s.step,a.stop().animate(i,n)},onMoveFinish:function(e){var t=s.step,i=0
if(e){for(i=0;t>i;++i)a.children().last().remove()
l.leftClones()}else{for(i=0;t>i;++i)a.children().first().remove()
var n=a.children()
for(i=0;t>i;++i)a.append($(n.get(i)).clone())}a.css(o,-r*s.step),l.addEvents(),a.trigger("karOusel.afterMove")},leftClones:function(){var e=a.children(),t=e.length
for(i=0;i<s.step;++i)a.prepend($(e.get(t-1-i)).clone())},curry:function(e,t){t=t||window
var i=Array.prototype.slice.call(arguments,2,arguments.length)
return function(){return e.apply(t,i)}}}
if("object"==typeof e)l.init(e),a.data("karOusel",this),a.data("karOusel.methods",l)
else if(l[e]){var c=a.data("karOusel.methods")
return c[e].apply(c,Array.prototype.slice.call(arguments,1))}return $(this)}